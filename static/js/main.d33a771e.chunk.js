(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,t,a){e.exports=a(399)},198:function(e,t,a){},399:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(74),o=a.n(c),l=(a(198),a(14)),s=a(15),i=a(17),u=a(16),p=a(18),m=a(5),d=a(7),h=(a(203),a(29)),b=a.n(h);var f=Object(d.b)(null,function(e){return{logout:function(){e(function(e){h.auth().signOut().then(function(){e({type:"LOGOUT_SUCCESS"})})})}}})(function(e){return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(m.c,{to:"/blog/post/create"},"New Post")),r.a.createElement("li",null,r.a.createElement("a",{onClick:e.logout},"Log Out")),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/blog/user",className:"btn btn-floating pink"},"IKP")))}),g=function(){return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(m.c,{to:"/blog/signin"},"Sign In")))},E=function(e){function t(e){var a;return Object(l.a)(this,t),a=Object(i.a)(this,Object(u.a)(t).call(this,e)),e.checkAuth(sessionStorage.getItem("user_token")),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.auth.uid?r.a.createElement(f,null):r.a.createElement(g,null);return r.a.createElement("nav",{className:"nav-wrapper grey darken-3"},r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{to:"/blog/",className:"brand-logo"},"Blog IKP"),e))}}]),t}(r.a.Component),v=Object(d.b)(function(e){return console.log(e),{auth:e.firebase.auth}},function(e){return{checkAuth:function(t){return e(function(e){return{type:"CHECK_AUTH",token:e}}(t))}}})(E),O=a(30);var y=function(e){var t=e.post;return r.a.createElement("div",{className:"card z-depth-0 project-summary"},r.a.createElement("div",{className:"card-content grey grey-text darken-3"},r.a.createElement(m.b,{to:"/blog/post/"+t.id},r.a.createElement("span",{className:"card-title"},t.title)),r.a.createElement("p",null,"Post By Me"),r.a.createElement("p",{className:"grey-text"},t.date)))};var j=function(e){var t=e.posts;return r.a.createElement("div",{className:"post-list section"},t&&t.map(function(e){return r.a.createElement(y,{post:e,key:e.id})}))},N=function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Follow Me"),r.a.createElement("div",{className:"card grey darken-3"},r.a.createElement("div",{className:"card-content"})))};h.initializeApp({apiKey:"AIzaSyCBe9-Lg9HMpwaraDyMLZVKgHWH3UqJc_Y",authDomain:"ikp-blog.firebaseapp.com",databaseURL:"https://ikp-blog.firebaseio.com",projectId:"ikp-blog",storageBucket:"",messagingSenderId:"5441272857",appId:"1:5441272857:web:68ee4e89dd3b6993"});var k=h.database().ref().child("posts");function S(){return function(e){k.on("value",function(t){var a=t.val(),n=[];for(var r in a)n.push({id:r,title:a[r].title,content:a[r].content,date:a[r].date});e(function(e){return{type:"SET_POST",posts:e}}(n))})}}var C=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getPost()}},{key:"render",value:function(){var e=this.props.posts.length?r.a.createElement(j,{posts:this.props.posts}):r.a.createElement("div",{className:"center"},r.a.createElement("br",null),"Loading Post...");return r.a.createElement("div",{className:"dashboard container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},e),r.a.createElement("div",{className:"col s12 m5 offset-m1"},r.a.createElement(N,null))))}}]),t}(n.Component),P=Object(d.b)(function(e){return{posts:e.post.posts,user:e.auth.user}},function(e){return{getPost:function(){e(S())}}})(C),w=a(28),H=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.changeHandle=function(e){a.setState(Object(w.a)({},e.target.id,e.target.value))},a.submitHandle=function(e){e.preventDefault(),a.props.login(a.state)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){if(this.props.auth.uid)return r.a.createElement(O.a,{to:"/blog/"});var e=this.props.authError?r.a.createElement("span",{className:"alert alert-danger"},r.a.createElement("center",null,this.props.authError)):null;return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.submitHandle,className:"grey darken-3"},r.a.createElement("h5",{className:"grey-text"},"Sign In"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.changeHandle})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.changeHandle})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Sign In")),e))}}]),t}(n.Component),T=Object(d.b)(function(e){return{authError:e.auth.authError,auth:e.firebase.auth}},function(e){return{login:function(t){var a;e((a=t,function(e){h.auth().signInWithEmailAndPassword(a.email,a.password).then(function(t){console.log(t.user),e({type:"LOGIN_SUCCESS"})}).catch(function(t){e({type:"LOGIN_FAILED",err:t})})}))}}})(H),I=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).clickHandle=function(e){e.preventDefault(),a.props.auth.uid?(a.props.deletePost(a.props.match.params.id),a.props.history.push("/blog/signin")):a.props.history.push("/blog/signin")},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.post;if(e){var t=this.props.auth.uid?r.a.createElement(m.b,{to:"/blog/post/"+e.id+"/edit"},"EDIT"):null,a=this.props.auth.uid?r.a.createElement("a",{href:"#",onClick:this.clickHandle},"Delete"):null;return r.a.createElement("div",{className:"container section project-detail"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content grey darken-3"},r.a.createElement("span",{className:"card-title"},e.title),r.a.createElement("p",null,e.content),"| ",t),r.a.createElement("div",{className:"card-action grey darken-3 grey-text text-darken-1"},r.a.createElement("div",null,"Posted By Me | ",a),r.a.createElement("div",null,e.date))))}return this.props.getPost(),r.a.createElement("div",{className:"container center"},"Post Loading...")}}]),t}(r.a.Component),L=Object(d.b)(function(e,t){var a=t.match.params.id;return{post:e.post.posts.find(function(e){return e.id==a}),auth:e.firebase.auth}},function(e){return{deletePost:function(t){return e(function(e){return function(t){k.child(e).remove().then(function(a){t({type:"DELETE_POST",id:e})}).catch(function(e){console.log(e)})}}(t))},getPost:function(){return e(S())}}})(I),D=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",content:"",date:""},a.changeHandle=function(e){a.setState(Object(w.a)({},e.target.id,e.target.value))},a.submitHandle=function(e){e.preventDefault(),a.props.createPost(a.state),a.props.history.push("/blog")},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=new Date,t=e.getDate()+" "+["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Aug","Sep","Oct","Nov","Des"][e.getMonth()]+" "+e.getFullYear();this.setState({date:t})}},{key:"render",value:function(){return this.props.auth.uid?r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.submitHandle,className:"grey darken-3"},r.a.createElement("h5",{className:"grey-text"},"Create Post"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"emtitleail"},"Title"),r.a.createElement("input",{type:"text",id:"title",onChange:this.changeHandle})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"content"},"Content"),r.a.createElement("textarea",{className:"materialize-textarea",id:"content",onChange:this.changeHandle})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Create")))):r.a.createElement(O.a,{to:"/blog/signin"})}}]),t}(n.Component),A=Object(d.b)(function(e){return{posts:e.post.posts,auth:e.firebase.auth}},function(e){return{createPost:function(t){e(function(e){return function(t){k.push(e).then(function(a){t({type:"CREATE_POST",post:e})}).catch(function(e){console.log(e)})}}(t))}}})(D),_=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",content:""},a.changeHandle=function(e){a.setState(Object(w.a)({},e.target.id,e.target.value))},a.submitHandle=function(e){e.preventDefault();a.props.posts.indexOf(a.props.post);a.props.editPost(a.state,a.props.match.params.id),a.props.history.push("/blog")},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({title:this.props.post.title,content:this.props.post.content})}},{key:"render",value:function(){return this.props.auth.uid?r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.submitHandle,className:"grey darken-3"},r.a.createElement("h5",{className:"grey-text"},"Edit Post"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"emtitleail"},"Title"),r.a.createElement("input",{type:"text",id:"title",value:this.state.title,onChange:this.changeHandle})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"content"},"Content"),r.a.createElement("textarea",{className:"materialize-textarea",value:this.state.content,id:"content",onChange:this.changeHandle})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Save")))):r.a.createElement(O.a,{to:"/blog/signin"})}}]),t}(n.Component),x=Object(d.b)(function(e,t){var a=e.post.posts;return{post:e.post.posts.find(function(e){return e.id==t.match.params.id}),posts:a,auth:e.firebase.auth}},function(e){return{editPost:function(t,a){e(function(e,t){return function(a){k.child(t).update(e).then(function(n){a({type:"EDIT_POST",post:e,id:t})}).catch(function(e){console.log(e)})}}(t,a))}}})(_);var F=function(){return r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(v,null),r.a.createElement(O.d,null,r.a.createElement(O.b,{exact:!0,path:"/blog/",component:P}),r.a.createElement(O.b,{path:"/blog/signin",component:T}),r.a.createElement(O.b,{path:"/blog/post/create",component:A}),r.a.createElement(O.b,{path:"/blog/post/:id/edit",component:x}),r.a.createElement(O.b,{path:"/blog/post/:id",component:L}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=a(25),U=a(192),z=a(24),B={posts:[]},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_POST":return console.log("Post Created"),Object(z.a)({},e);case"SET_POST":return console.log("Post Loaded"),Object(z.a)({},e,{posts:t.posts});case"EDIT_POST":return console.log("Post Edited : ",t.id),Object(z.a)({},e);case"DELETE_POST":console.log("Post Deleted : ",t.id);var a=e.posts.filter(function(e){return e.id!=t.id});return Object(z.a)({},e,{posts:a});default:return e}},J={authError:!1,user:null},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return console.log("Logged In : "),Object(z.a)({},e,{authError:!1});case"LOGIN_FAILED":return console.log("Login Failed ",t.err),Object(z.a)({},e,{authError:"Login Failed"});case"LOGOUT_SUCCESS":return console.log("Logout Success"),Object(z.a)({},e);case"CHECK_AUTH":return Object(z.a)({},e,{user:t.token});default:return e}},R=a(76),W=Object(M.c)({post:G,auth:K,firebase:R.firebaseReducer}),Y=Object(M.d)(Object(R.reactReduxFirebase)(b.a,{userProfile:"users",enableLogging:!1}))(M.e)(W,Object(M.a)(U.a));o.a.render(r.a.createElement(d.a,{store:Y},r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[193,1,2]]]);
//# sourceMappingURL=main.d33a771e.chunk.js.map